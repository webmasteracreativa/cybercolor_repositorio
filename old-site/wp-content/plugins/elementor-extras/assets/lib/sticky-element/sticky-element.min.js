(function(){var t;t=window.jQuery,t.fn.stick_element=function(e){var o,i,s,n,r,l,a,c,p,u,d,f,g,h;for(null==e&&(e={}),g=e.sticky_class,l=e.inner_scrolling,f=e.recalc_every,d=e.parent,p=e.offset_top,c=e.spacer,s=e.bottoming,h=e.win,null==p&&(p=0),null==d&&(d=void 0),null==l&&(l=!0),null==g&&(g="is_stuck"),null==h&&(h=t(window)),o=t(document),null==s&&(s=!0),u=function(t){var e,o;return window.getComputedStyle?(t[0],e=window.getComputedStyle(t[0]),o=parseFloat(e.getPropertyValue("width"))+parseFloat(e.getPropertyValue("margin-left"))+parseFloat(e.getPropertyValue("margin-right")),"border-box"!==e.getPropertyValue("box-sizing")&&(o+=parseFloat(e.getPropertyValue("border-left-width"))+parseFloat(e.getPropertyValue("border-right-width"))+parseFloat(e.getPropertyValue("padding-left"))+parseFloat(e.getPropertyValue("padding-right"))),o):t.outerWidth(!0)},n=function(e,i,n,r,a,m,y,v){var b,w,k,_,x,P,V,F,C,z,I,A;if(!e.data("sticky_element")){if(e.data("sticky_element",!0),x=o.height(),V=e.parent(),null!=d&&(V=V.closest(d)),!V.length)throw"failed to find stick parent";if(k=!1,b=!1,I=null!=c?c&&e.closest(c):t("<div />"),I&&I.css("position",e.css("position")),F=function(){var t,s,l;if(!v)return x=o.height(),t=parseInt(V.css("border-top-width"),10),s=parseInt(V.css("padding-top"),10),i=parseInt(V.css("padding-bottom"),10),n=V.offset().top+t+s,r=V.height(),k&&(k=!1,b=!1,null==c&&(e.insertAfter(I),I.detach()),e.css({position:"",top:"",width:"",bottom:""}).removeClass(g),l=!0),a=e.offset().top-(parseInt(e.css("margin-top"),10)||0)-p,m=e.outerHeight(!0),setTimeout(function(){m=e.outerHeight(!0)},1),y=e.css("float"),I&&I.css({width:u(e),height:m,display:e.css("display"),"vertical-align":e.css("vertical-align"),float:y}),l?A():void 0},F(),m!==r)return _=void 0,P=p,z=f,A=function(){var t,u,d,w,C,A;if(!v)return d=!1,null!=z&&(z-=1)<=0&&(z=f,F(),d=!0),d||o.height()===x||(F(),d=!0),w=h.scrollTop(),null!=_&&(u=w-_),_=w,k?(s&&(C=w+m+P>r+n,b&&!C&&(b=!1,e.css({position:"fixed",bottom:"",top:P}).trigger("sticky_element:unbottom"))),w<a&&(k=!1,P=p,null==c&&("left"!==y&&"right"!==y||e.insertAfter(I),I.detach()),t={position:"",width:"",top:""},e.css(t).removeClass(g).trigger("sticky_element:unstick")),l&&(A=h.height(),m+p>A&&(b||(P-=u,P=Math.max(A-m,P),P=Math.min(p,P),k&&e.css({top:P+"px"}))))):w>a&&(k=!0,t={position:"fixed",top:P},t.width="border-box"===e.css("box-sizing")?e.outerWidth()+"px":e.width()+"px",e.css(t).addClass(g),null==c&&(e.after(I),"left"!==y&&"right"!==y||I.append(e)),e.trigger("sticky_element:stick")),k&&s&&(null==C&&(C=w+m+P>r+n),!b&&C)?(b=!0,"static"===V.css("position")&&V.css({position:"relative"}),e.css({position:"absolute",bottom:i,top:"auto"}).trigger("sticky_element:bottom")):void 0},C=function(){return F(),A()},w=function(){if(v=!0,h.off("touchmove",A),h.off("scroll",A),h.off("resize",C),t(document.body).off("sticky_element:recalc",C),e.off("sticky_element:detach",w),e.removeData("sticky_element"),e.css({position:"",bottom:"",top:"",width:""}),V.position("position",""),k)return null==c&&("left"!==y&&"right"!==y||e.insertAfter(I),I.remove()),e.removeClass(g)},h.on("touchmove",A),h.on("scroll",A),h.on("resize",C),t(document.body).on("sticky_element:recalc",C),e.on("sticky_element:detach",w),setTimeout(A,0)}},r=0,a=this.length;r<a;r++)i=this[r],n(t(i));return this}}).call(this);