!function(e,t,o,s){e.parallaxElement=function(s,i){var l={scope:e(t),type:"scroll",scroll:{relative:"middle",responsive:!1},mouse:{axis:"both",relative:"element",distance:null},speed:{desktop:.15,tablet:.15,mobile:.15},invert:!1,breakpoints:{mobile:768,tablet:1024}},n=this;n.opts={};var r=null,a=e(s),p=e(o),u=e(t).height(),c=(p.height(),null),d=null,f=null,m=null,h=null,v=null,b=null,w=null,M=null,x=null,T=null,k=null,S=null,g=50,y=-1,P=0,q=!1,E=null;n.init=function(){n.opts=e.extend(!0,{},l,i),n._construct()},n._construct=function(){r=n.opts.scope,P=r.scrollTop(),n.setSpeed(n.opts.speed.desktop),n.setup(),n.events(),n.requestTick()},n.setup=function(){u=e(t).height(),b=a.height(),w=a.width(),d=a.offset().top,m=d+b,c=r.scrollTop(),v=d+b/2,n.isTablet()&&n.setSpeed(n.opts.speed.tablet),n.isMobile()&&n.setSpeed(n.opts.speed.mobile),n.isDesktop()?r.on("mousemove",n.onMouseMove):r.off("mousemove",n.onMouseMove)},n.isTablet=function(){return r.width()<n.opts.breakpoints.tablet&&r.width()>=n.opts.breakpoints.mobile},n.isMobile=function(){return r.width()<n.opts.breakpoints.tablet&&r.width()<n.opts.breakpoints.mobile},n.isDesktop=function(){return r.width()>n.opts.breakpoints.tablet},n.events=function(){r.on("resize",n.setup),"mouse"===n.opts.type&&n.isDesktop()&&r.on("mousemove",n.onMouseMove),"scroll"===n.opts.type&&r.on("scroll",n.onScroll)},n.onMouseMove=function(e){T=e.clientX,S=e.clientY,n.requestTick()},n.onScroll=function(){P=r.scrollTop(),n.requestTick()},n.requestTick=function(){q||(E=requestAnimationFrame(n.update)),q=!0},n.setSpeed=function(e){M=parseFloat(e),M=n.opts.invert&&M>0?-M:M},n.update=function(){if(q=!1,a.visible(!0,!1,"vertical"))switch(n.opts.type){case"mouse":n.pan();break;default:n.move()}},n.move=function(){if(n.opts.scroll.responsive&&r.width()<n.opts.breakpoints[n.opts.scroll.responsive])return void n.clearProps();if(y!==P){y=P,g=100*(1-M+.1);var o=e(t).height();middleOfScreen=P+o/2,middleToMiddle=middleOfScreen-v,middleToTop=middleOfScreen-d,c=P+o,f=a.offset().top,h=f+b,pxSinceVisible=P-d+o,pPxSinceVisible=P-f+o,k="middle"===n.opts.scroll.relative?middleToMiddle:P,TweenMax.set(a,{y:k*M,x:0})}},n.pan=function(){if(T&&S){var o=a.offset().left+a.outerWidth()/2,s=a.offset().top-r.scrollTop()+a.outerHeight()/2,i=r.width()/2,l=e(t).height()/2,p="viewport"===n.opts.mouse.relative?i:o,u="viewport"===n.opts.mouse.relative?l:s,c=(r.width()-r.outerWidth())/2,d=T-p,f=(e(t).height()-e(t).outerHeight())/2,m=S-u;x=n.opts.inverse?c-d:c+d,k=n.opts.inverse?f-m:f+m,x*=.1*M,k*=.1*M;var h={ease:Power0.easeInOut};if("vertical"!==n.opts.mouse.axis&&"both"!==n.opts.mouse.axis||(h.y=k),"horizontal"!==n.opts.mouse.axis&&"both"!==n.opts.mouse.axis||(h.x=x),n.opts.mouse.distance){Math.floor(Math.sqrt(Math.pow(T-(a.offset().left+a.width()/2),2)+Math.pow(S-(a.offset().top-r.scrollTop()+a.height()/2),2)))>n.opts.mouse.distance?TweenMax.to(a,.3,{x:0,y:0,ease:Power0.easeInOut}):TweenMax.to(a,.3,h)}else TweenMax.to(a,.3,h)}},n.clearProps=function(){TweenMax.set(a,{clearProps:"all"})},n.destroy=function(){cancelAnimationFrame(E),n.clearProps(),r.off("scroll",n.onScroll).off("mousemove",n.onMouseMove).off("resize",n.setup),a.removeData("parallaxElement")},n.init()},e.fn.parallaxElement=function(t){return this.each(function(){if(void 0===e(this).data("parallaxElement")){var o=new e.parallaxElement(this,t);e(this).data("parallaxElement",o)}})}}(jQuery,window,document);