!function(e,i,a,o){e.imageComparison=function(a,o){var n={scope:e(i),editMode:!1,clickToMove:!1,clickLabels:!1,animateClick:!0},t=this;t.opts={};var s=null,l=(e(i),e(a)),r=null,d=null,m=!1,c=!1,f=!1;t.init=function(){t.opts=e.extend({},n,o),t._construct()},t._construct=function(){s=t.opts.scope,r=l.find('.ee-image-comparison__label[data-type="original"]'),d=l.find('.ee-image-comparison__label[data-type="modified"]'),t.checkPosition(),t.setup(),t.events()},t.checkPosition=function(){l.is(".is--visible")||(s.scrollTop()+1*s.height()>l.offset().top&&(l.addClass("is--visible"),TweenMax.from(l.find(".ee-image-comparison__image"),.7,{width:"0%",ease:Back.easeOut.config(.7),clearProps:"all"})),c=!1)},t.checkLabel=function(){t.updateLabel(r,l.find(".ee-image-comparison__handle"),l.find(".ee-image-comparison__image"),"left"),t.updateLabel(d,l.find(".ee-image-comparison__handle"),l.find(".ee-image-comparison__image"),"right"),f=!1},t.updateLabel=function(e,i,a,o){"left"==o?e.offset().left+e.outerWidth()+i.outerWidth()/2<a.offset().left+a.outerWidth()?e.removeClass("is--hidden"):e.addClass("is--hidden"):e.offset().left>a.offset().left+a.outerWidth()+i.outerWidth()/2?e.removeClass("is--hidden"):e.addClass("is--hidden")},t.setup=function(){t.drags(l.find(".ee-image-comparison__handle"),l.find(".ee-image-comparison__image"),l,r,d)},t.events=function(){s.on("scroll",function(){c||(c=!0,i.requestAnimationFrame?requestAnimationFrame(function(){t.checkPosition()}):setTimeout(function(){t.checkPosition()},100))}),s.on("resize",function(){f||(f=!0,i.requestAnimationFrame?requestAnimationFrame(function(){t.checkLabel()}):setTimeout(function(){t.checkLabel()},100))}),t.opts.clickToMove&&!t.opts.editMode&&(t.opts.clickLabels&&(r.on("click",function(e){t.onBeforeLabelClick(),t.updatePosition(0,r,d,l.find(".ee-image-comparison__image"),!0),t.onAfterLabelClick()}),d.on("click",function(e){t.onBeforeLabelClick(),t.updatePosition(l.outerWidth(),r,d,l.find(".ee-image-comparison__image"),!0),t.onAfterLabelClick()})),l.on("click",function(i){if(!e(i.target).is(".ee-image-comparison__label")){l.find(".ee-image-comparison__image").addClass("resizable"),l.find(".ee-image-comparison__handle").addClass("draggable");var a=(i.pageX-l.offset().left)/l.outerWidth()*100+"%";t.updatePosition(a,r,d,l.find(".ee-image-comparison__image"),t.opts.animateClick),l.find(".ee-image-comparison__image").removeClass("resizable"),l.find(".ee-image-comparison__handle").removeClass("draggable")}}))},t.onBeforeLabelClick=function(){l.find(".ee-image-comparison__image").addClass("resizable"),l.find(".ee-image-comparison__handle").addClass("draggable")},t.onAfterLabelClick=function(){l.find(".ee-image-comparison__image").removeClass("resizable"),l.find(".ee-image-comparison__handle").removeClass("draggable")},t.drags=function(e,a,o,n,s){e.on("mousedown vmousedown",function(l){e.addClass("draggable"),a.addClass("resizable");var r=e.outerWidth(),d=e.offset().left+r-l.pageX,c=o.offset().left,f=o.outerWidth(),u=c-r/2,g=c+f-r/2;e.parents().on("mousemove vmousemove",function(e){m||(m=!0,i.requestAnimationFrame?requestAnimationFrame(function(){t.animateDraggedHandle(e,d,r,u,g,c,f,a,n,s)}):setTimeout(function(){t.animateDraggedHandle(e,d,r,u,g,c,f,a,n,s)},100))}).on("mouseup vmouseup",function(i){e.removeClass("draggable"),a.removeClass("resizable")}),l.preventDefault()}).on("mouseup vmouseup",function(i){e.removeClass("draggable"),a.removeClass("resizable")})},t.animateDraggedHandle=function(i,a,o,n,s,r,d,c,f,u){var g=i.pageX+a-o;g<n?g=n:g>s&&(g=s);var p=100*(g+o/2-r)/d+"%";l.find(".draggable").css("left",p).on("mouseup vmouseup",function(){e(this).removeClass("draggable"),c.removeClass("resizable")}),t.updatePosition(p,f,u,c,!1),m=!1},t.updatePosition=function(e,i,a,o,n){var s=l.find(".draggable"),r=l.find(".resizable");n?(TweenMax.to(s,.2,{left:e}),TweenMax.to(r,.2,{width:e})):(s.css("left",e),r.css("width",e)),t.updateLabel(a,l.find(".ee-image-comparison__handle"),o,"left"),t.updateLabel(i,l.find(".ee-image-comparison__handle"),o,"right")},t.destroy=function(){l.removeData("imageComparison")},t.init()},e.fn.imageComparison=function(i){return this.each(function(){if(void 0===e(this).data("imageComparison")){var a=new e.imageComparison(this,i);e(this).data("imageComparison",a)}})}}(jQuery,window,document);